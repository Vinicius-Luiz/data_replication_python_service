{
    "task": {
        "task_name": "teste_transformacoes_matematicas",
        "replication_type": "full_load",
        "interval_seconds": 60,
        "start_mode": "reload",
        "create_table_if_not_exists": true,
        "full_load_settings": {
            "recreate_table_if_exists": true,
            "truncate_before_insert": true
        }
    },
    "error_handling": {
        "stop_if_insert_error": false,
        "stop_if_update_error": false,
        "stop_if_delete_error": false,
        "stop_if_upsert_error": false
    },
    "tables": [
        {
            "schema_name": "matematica",
            "table_name": "calculos",
            "priority": 0
        }
    ],
    "filters": [],
    "transformations": [
        {
            "table_info": {
                "schema_name": "matematica",
                "table_name": "calculos"
            },
            "settings": {
                "transformation_type": "modify_column_value",
                "description": "Aplicar desconto fixo de 10% sobre valor_base",
                "contract": {
                    "operation": "math_expression",
                    "column_name": "valor_base",
                    "expression": "value * 0.9"
                },
                "priority": 0
            }
        },
        {
            "table_info": {
                "schema_name": "matematica",
                "table_name": "calculos"
            },
            "settings": {
                "transformation_type": "modify_column_value",
                "description": "Dobrar o valor do frete",
                "contract": {
                    "operation": "math_expression",
                    "column_name": "valor_frete",
                    "expression": "value * 2"
                },
                "priority": 1
            }
        },
        {
            "table_info": {
                "schema_name": "matematica",
                "table_name": "calculos"
            },
            "settings": {
                "transformation_type": "modify_column_value",
                "description": "Arredondar o valor do imposto para inteiro",
                "contract": {
                    "operation": "math_expression",
                    "column_name": "valor_imposto",
                    "expression": "ROUND(value, 0)"
                },
                "priority": 2
            }
        },
        {
            "table_info": {
                "schema_name": "matematica",
                "table_name": "calculos"
            },
            "settings": {
                "transformation_type": "modify_column_value",
                "description": "Calcular metade do peso",
                "contract": {
                    "operation": "math_expression",
                    "column_name": "peso_kg",
                    "expression": "value / 2"
                },
                "priority": 3
            }
        },
        {
            "table_info": {
                "schema_name": "matematica",
                "table_name": "calculos"
            },
            "settings": {
                "transformation_type": "modify_column_value",
                "description": "Adicionar 100 ao valor_base",
                "contract": {
                    "operation": "math_expression",
                    "column_name": "valor_base",
                    "expression": "value + 100"
                },
                "priority": 4
            }
        }
    ]
} 